<div class="container my-5">
    <h1 class="mb-4 text-primary">Introducci√≥n a los Eventos en JavaScript</h1>
    <p>Los eventos son la base de la interactividad en la web. Son "cosas que pasan" en el sistema (como un clic del
        usuario, la carga de una p√°gina o un error) y JavaScript nos permite "escuchar" esas se√±ales para ejecutar
        c√≥digo en respuesta.</p>

    <h2 class="mb-4 text-primary">Los 5 Eventos Esenciales que Debes Conocer</h2>
    <p>Aunque existen cientos de eventos, estos son los m√°s importantes y los que usar√°s en el 90% de los casos:</p>
    <ol>
        <li><strong><code>click</code>:</strong> Se dispara cuando el usuario hace clic en un elemento. Es el evento m√°s
            com√∫n para botones, enlaces y otros elementos interactivos.</li>
        <li><strong><code>submit</code>:</strong> Se dispara en un elemento <code>&lt;form&gt;</code> cuando se intenta
            enviar. Es crucial para validar los datos de un formulario antes de enviarlos al servidor.</li>
        <li><strong><code>keydown</code> / <code>keyup</code>:</strong> Se disparan cuando el usuario presiona o suelta
            una tecla del teclado. √ötil para crear atajos de teclado o interactuar mientras el usuario escribe.</li>
        <li><strong><code>mouseover</code> / <code>mouseout</code>:</strong> Se disparan cuando el puntero del rat√≥n
            entra o sale de un elemento. Perfectos para efectos visuales como men√∫s desplegables o tooltips.</li>
        <li><strong><code>DOMContentLoaded</code>:</strong> Se dispara en el objeto <code>document</code> cuando el HTML
            de la p√°gina ha sido completamente cargado y parseado. Es el punto de partida ideal para ejecutar tu c√≥digo
            JavaScript.</li>
    </ol>

    <h2 class="mb-4 text-primary">El M√©todo Moderno: <code>addEventListener()</code></h2>
    <p>El m√©todo <code>addEventListener()</code> es la forma moderna y recomendada para registrar un "manejador de
        eventos" (la funci√≥n que se ejecutar√° cuando ocurra el evento).</p>
    <p>Su sintaxis b√°sica es: <code>elemento.addEventListener('nombreDelEvento', funcionAEjecutar);</code></p>

    <div class="position-relative">
        <button class="btn btn-sm btn-outline-secondary position-absolute top-0 end-0 m-2"
            onclick="copiarCodigo(this)">Copiar</button>
        <pre><code class="language-javascript">
// 1. Seleccionamos el bot√≥n del DOM
const btn = document.querySelector("button");

// 2. Definimos la funci√≥n que se ejecutar√°
function changeBackground() {
  const rndCol = `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})`;
  document.body.style.backgroundColor = rndCol;
}

// 3. Asociamos la funci√≥n al evento 'click' del bot√≥n
btn.addEventListener("click", changeBackground);
        </code></pre>
    </div>

    <div class="alert alert-danger mt-4" role="alert">
        <h4 class="alert-heading">‚ùå Mala Pr√°ctica: Manejadores de Eventos en L√≠nea</h4>
        <p>Es posible que veas c√≥digo que asigna eventos directamente en el HTML, como
            <code>&lt;button onclick="miFuncion()"&gt;</code>. Esta es una pr√°ctica <strong>obsoleta y
                desaconsejada</strong> por varias razones:</p>
        <ul>
            <li><strong>Mezcla responsabilidades:</strong> Combina la estructura (HTML) con el comportamiento
                (JavaScript), lo que dificulta la lectura y el mantenimiento.</li>
            <li><strong>Es poco escalable:</strong> Imagina tener que a√±adir ese atributo a 100 botones.</li>
            <li><strong>Problemas de seguridad:</strong> Muchos servidores desactivan el JavaScript en l√≠nea por motivos
                de seguridad.</li>
        </ul>
        <p class="mb-0"><strong>Conclusi√≥n:</strong> Usa siempre <code>addEventListener()</code>.</p>
    </div>

    <h2 class="mb-4 text-primary">El Objeto Evento</h2>
    <p>Cuando un evento ocurre, el navegador pasa autom√°ticamente un objeto especial a tu funci√≥n manejadora. Este
        objeto, com√∫nmente llamado <code>event</code>, <code>evt</code> o simplemente <code>e</code>, contiene
        informaci√≥n muy √∫til sobre el evento.</p>

    <h3 class="mb-4 text-primary">Propiedad Clave: <code>event.target</code></h3>
    <p>La propiedad <code>target</code> del objeto evento es una referencia al elemento exacto sobre el cual ocurri√≥ el
        evento. Esto es incre√≠blemente √∫til.</p>

    <div class="position-relative">
        <button class="btn btn-sm btn-outline-secondary position-absolute top-0 end-0 m-2"
            onclick="copiarCodigo(this)">Copiar</button>
        <pre><code class="language-javascript">
function bgChange(e) {
  // e.target es el elemento que fue clickeado (en este caso, el bot√≥n)
  const rndCol = `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255})`;
  e.target.style.backgroundColor = rndCol;
  console.log(e); // Explora el objeto evento en la consola
}

btn.addEventListener("click", bgChange);
        </code></pre>
    </div>

    <h3 class="mb-4 text-primary">Evitando el Comportamiento por Defecto: <code>event.preventDefault()</code></h3>
    <p>Algunos eventos tienen un comportamiento por defecto en el navegador. Por ejemplo, al hacer clic en un enlace se
        navega a una nueva p√°gina, y al enviar un formulario se recarga la p√°gina. Podemos detener este comportamiento
        con <code>event.preventDefault()</code>.</p>

    <div class="position-relative">
        <button class="btn btn-sm btn-outline-secondary position-absolute top-0 end-0 m-2"
            onclick="copiarCodigo(this)">Copiar</button>
        <pre><code class="language-javascript">
const form = document.querySelector("form");
const fname = document.getElementById("fname");
const para = document.querySelector("p");

form.addEventListener("submit", (e) => {
  if (fname.value === "") {
    // Si el campo de nombre est√° vac√≠o, detenemos el env√≠o del formulario.
    e.preventDefault();
    para.textContent = "¬°Necesitas completar el campo de nombre!";
  }
});
        </code></pre>
    </div>

    <h2 class="mb-4 text-primary">Conceptos Avanzados: Propagaci√≥n de Eventos</h2>
    <p>Cuando un evento ocurre en un elemento anidado, el navegador no solo notifica a ese elemento. El evento "viaja" a
        trav√©s de sus ancestros en el DOM. Este fen√≥meno se llama propagaci√≥n de eventos.</p>

    <h3 class="mb-4 text-primary">Burbujeo (Bubbling): De Adentro hacia Afuera üßº</h3>
    <p>Por defecto, los eventos se propagan en fase de "burbujeo". El evento se dispara primero en el elemento m√°s
        interno, y luego "burbujea" hacia arriba a trav√©s de sus padres, hasta llegar al <code>document</code>.</p>
    <p><code>Elemento Interno ‚û°Ô∏è Padre ‚û°Ô∏è Abuelo ‚û°Ô∏è ... ‚û°Ô∏è document</code></p>
    <p>A veces, este comportamiento puede causar problemas. Podemos detenerlo con <code>event.stopPropagation()</code>.
    </p>

    <div class="position-relative">
        <button class="btn btn-sm btn-outline-secondary position-absolute top-0 end-0 m-2"
            onclick="copiarCodigo(this)">Copiar</button>
        <pre><code class="language-javascript">
video.addEventListener("click", (event) => {
  // Evita que el clic en el video se propague a su contenedor padre.
  event.stopPropagation();
  video.play();
});
        </code></pre>
    </div>

    <h3 class="mb-4 text-primary">Captura (Capturing): De Afuera hacia Adentro üé£</h3>
    <p>Existe una fase previa al burbujeo llamada "captura". El evento viaja desde el <code>document</code> hacia abajo
        hasta el elemento objetivo. Esta fase se usa con menos frecuencia, pero se puede activar pasando un tercer
        argumento a <code>addEventListener</code>.</p>
    <p><code>document ‚û°Ô∏è Abuelo ‚û°Ô∏è Padre ‚û°Ô∏è Elemento Interno</code></p>

    <div class="alert alert-success mt-4" role="alert">
        <h4 class="alert-heading">Aprovechando el Burbujeo: Delegaci√≥n de Eventos</h4>
        <p>El burbujeo es la base de una t√©cnica muy potente y eficiente llamada <strong>delegaci√≥n de eventos</strong>.
            En lugar de a√±adir un manejador a cada uno de los 100 botones de una lista, podemos a√±adir un √∫nico
            manejador al contenedor padre.</p>
        <p>Gracias al burbujeo, cualquier clic en un bot√≥n "subir√°" hasta el padre. Dentro del manejador del padre,
            podemos usar <code>event.target</code> para saber qu√© bot√≥n exacto fue clickeado.</p>
        <div class="position-relative">
            <button class="btn btn-sm btn-outline-secondary position-absolute top-0 end-0 m-2"
                onclick="copiarCodigo(this)">Copiar</button>
            <pre><code class="language-javascript">
const container = document.querySelector("#container");

container.addEventListener("click", (event) => {
  // Comprobamos si el elemento clickeado (event.target) es un bot√≥n
  if (event.target.tagName === 'BUTTON') {
    event.target.style.backgroundColor = 'red';
  }
});
            </code></pre>
        </div>
        <p class="mb-0 mt-3">Esta t√©cnica es mucho m√°s eficiente, especialmente para listas de elementos din√°micas.</p>
    </div>

</div>
